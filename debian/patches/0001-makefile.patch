From: "Barak A. Pearlmutter" <barak+git@cs.nuim.ie>
Date: Mon, 18 Feb 2013 08:58:44 +0000
Subject: makefile

---
 makefile | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/makefile b/makefile
index dcbcc4d..5ae662c 100644
--- a/makefile
+++ b/makefile
@@ -1,5 +1,11 @@
 # Makefile for TinyScheme 
 # Time-stamp: <2002-06-24 14:13:27 gildea> 
+
+PREFIX=$(DESTDIR)/usr
+BINDIR=$(PREFIX)/bin
+MANDIR=$(PREFIX)/share/man/man1
+INCDIR=$(PREFIX)/include
+LIBDIR=$(PREFIX)/lib/tinyscheme
   
 # Windows/2000 
 #CC = cl -nologo 
@@ -33,7 +39,7 @@ AR= ar crs
 LD = gcc 
 LDFLAGS = -shared 
 DEBUG=-g -Wno-char-subscripts -O
-SYS_LIBS= -ldl
+SYS_LIBS= -ldl -lm
 PLATFORM_FEATURES= -DSUN_DL=1
 
  
@@ -47,7 +53,7 @@ PLATFORM_FEATURES= -DSUN_DL=1
 #LIBPREFIX = lib 
 #OUT = -o $@ 
  
-FEATURES = $(PLATFORM_FEATURES) -DUSE_DL=1 -DUSE_MATH=0 -DUSE_ASCII_NAMES=0 
+FEATURES = $(PLATFORM_FEATURES) -DUSE_DL=1 -DUSE_MATH=1 -DUSE_ASCII_NAMES=0 -DInitFile=\"$(LIBDIR)/init.scm\"
  
 OBJS = scheme.$(Osuf) dynload.$(Osuf) 
  
@@ -56,6 +62,12 @@ STATICLIBTARGET = $(LIBPREFIX)tinyscheme.$(LIBsuf)
 
 all: $(LIBTARGET) $(STATICLIBTARGET) scheme$(EXE_EXT)
 
+install: scheme
+	install -m 755 -d $(BINDIR) $(MANDIR) $(LIBDIR)
+	install -m 755 $< $(BINDIR)/tinyscheme
+	install -m 644 debian/tinyscheme.1 $(MANDIR)
+	install -m 644 init.scm $(LIBDIR)
+
 %.$(Osuf): %.c 
 	$(CC) -I. -c $(DEBUG) $(FEATURES) $(DL_FLAGS) $< 
 
